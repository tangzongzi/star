# 儿童奖励系统项目配置 (MVP版本)

## 项目概述
"星星任务"是一个面向家庭的儿童奖励系统，旨在通过任务完成和积分奖励的方式，鼓励孩子养成良好习惯。家长可以创建任务，设置奖励，而孩子则通过完成任务获取积分，兑换各种奖励。

## 技术栈
- **前端**：React + Next.js
- **样式**：TailwindCSS
- **部署**：Netlify
- **数据库**：FaunaDB (通过Netlify集成)
- **API**：Netlify Functions
- **认证**：简单用户名认证，无需邮箱

## 关键模式和约定
- **代码风格**：使用ES6+语法，函数组件和Hooks
- **文件结构**：基于特性的模块化组织
- **状态管理**：使用React Context API和localStorage
- **API设计**：RESTful风格API
- **命名约定**：camelCase (变量和函数)，PascalCase (组件)

## 功能需求

### 1. 用户管理 [MVP功能]
- **用户注册**：简单用户名注册，无需邮箱验证
- **家庭创建**：创建家庭后可添加多个孩子账户
- **用户认证**：简单的用户名和密码登录
- **用户角色**：家长和孩子
- **基础个人资料**：头像、昵称

### 2. 任务管理 [MVP功能]
- **任务创建**：家长创建任务，设置名称、描述、点数、截止日期
- **任务类型**：
  - 日常任务（如每天刷牙）
  - 每周任务（如整理房间）
  - 一次性任务（如完成特定作业）
- **任务分类**：简单分类（学习、家务、其他）
- **任务状态**：未完成、等待验证、已完成
- **任务验证**：孩子标记完成，家长确认

### 3. 积分系统 [MVP功能]
- **积分获取**：完成任务获得积分
- **积分余额**：显示当前可用积分
- **简单积分历史**：显示最近10条积分变更

### 4. 奖励系统 [MVP功能]
- **奖励商店**：家长创建可兑换的奖励
- **奖励类型**：
  - 物质奖励（如玩具、书籍）
  - 特权奖励（如额外的游戏时间、选择晚餐）
- **奖励兑换**：使用积分兑换奖励
- **兑换历史**：简单记录已兑换的奖励

### 5. 简单成就系统 [后续迭代]
- **基础成就**：首次完成任务、累计完成10个任务等简单成就
- **成就徽章**：简单的图标表示

### 6. 数据展示 [MVP功能]
- **进度概览**：简单统计和进度条
- **任务完成率**：基础数据展示

### 7. 简单交互元素 [MVP功能]
- **基础动画**：简单过渡效果
- **通知提醒**：任务截止提醒

## 数据模型

### User (用户)
```javascript
{
  id: "用户ID",
  username: "用户名",
  password: "密码(加密存储)",
  name: "姓名",
  role: "家长/孩子",
  avatar: "头像URL",
  createdAt: "创建时间",
  familyId: "所属家庭ID"
}
```

### Family (家庭)
```javascript
{
  id: "家庭ID",
  name: "家庭名称",
  parentIds: ["家长用户ID"],
  childrenIds: ["孩子用户ID"],
  createdAt: "创建时间"
}
```

### Task (任务)
```javascript
{
  id: "任务ID",
  title: "任务标题",
  description: "任务描述",
  points: "积分奖励",
  category: "任务分类",
  createdBy: "创建者ID",
  assignedTo: "指派给ID",
  dueDate: "截止日期",
  recurring: "重复类型(每日/每周/一次性)",
  status: "任务状态",
  createdAt: "创建时间",
  completedAt: "完成时间",
  verifiedBy: "验证者ID"
}
```

### Reward (奖励)
```javascript
{
  id: "奖励ID",
  title: "奖励名称",
  description: "奖励描述",
  points: "所需积分",
  category: "奖励类型",
  createdBy: "创建者ID",
  availableTo: ["可获取用户ID"],
  imageUrl: "奖励图片(可选)",
  createdAt: "创建时间"
}
```

### PointTransaction (积分交易)
```javascript
{
  id: "交易ID",
  userId: "用户ID",
  points: "积分数量",
  type: "获取/使用",
  source: "任务ID/奖励ID",
  description: "交易描述",
  createdAt: "创建时间"
}
```

## 页面路由结构

### 公共页面
- `/` - 首页/登录页
- `/register` - 注册页

### 家长页面
- `/parent/dashboard` - 家长仪表盘
- `/parent/tasks` - 任务管理
- `/parent/rewards` - 奖励管理
- `/parent/children` - 孩子管理
- `/parent/settings` - 设置页面

### 孩子页面
- `/child/dashboard` - 孩子仪表盘
- `/child/tasks` - 任务列表
- `/child/rewards` - 奖励商店
- `/child/profile` - 个人资料

## 核心API端点 [MVP功能]

### 认证API
- `POST /api/auth/login` - 用户登录
- `POST /api/auth/register` - 用户注册

### 用户API
- `GET /api/users/:id` - 获取用户信息
- `PUT /api/users/:id` - 更新用户信息
- `GET /api/families/:id` - 获取家庭信息
- `POST /api/families` - 创建家庭

### 任务API
- `GET /api/tasks` - 获取任务列表
- `POST /api/tasks` - 创建任务
- `PUT /api/tasks/:id` - 更新任务
- `DELETE /api/tasks/:id` - 删除任务
- `PUT /api/tasks/:id/complete` - 标记任务完成
- `PUT /api/tasks/:id/verify` - 验证任务完成

### 奖励API
- `GET /api/rewards` - 获取奖励列表
- `POST /api/rewards` - 创建奖励
- `PUT /api/rewards/:id` - 更新奖励
- `DELETE /api/rewards/:id` - 删除奖励
- `POST /api/rewards/:id/redeem` - 兑换奖励

### 积分API
- `GET /api/points/:userId` - 获取积分余额
- `GET /api/points/:userId/history` - 获取积分历史
- `POST /api/points/:userId` - 添加/扣除积分

## UI/UX设计标准 [简化版]

### 响应式设计规范

#### 视口断点
- **移动端**: 最小宽度 320px，最大宽度 639px
- **平板端**: 最小宽度 640px，最大宽度 1023px
- **桌面端**: 最小宽度 1024px 及以上

#### 基础布局原则
- 采用移动优先（Mobile First）设计策略
- 使用弹性布局（Flexbox）和网格布局（Grid）
- 关键内容优先，确保在各设备上最重要的信息优先展示

#### 交互元素尺寸
- **按钮高度**:
  - 移动端: 48px（确保易于点击）
  - 平板/桌面端: 44px
- **点击/触摸区域**: 最小 44px × 44px

#### 排版规范
- **基础字号**: 16px（所有设备）
- **标题字号**:
  - H1: 24px - 32px
  - H2: 20px - 28px
  - H3: 18px - 24px
- **行高**: 正文 1.5，标题 1.2

### 设备特定UI适配

#### 移动端（手机）优化
- 单列内容布局
- 简化导航（底部导航栏）
- 触控优先设计，较大点击区域

#### 平板端（iPad）优化
- 主侧栏布局（可收起侧栏）
- 内容使用两列网格
- 支持横竖屏自适应布局

#### 桌面端优化
- 三栏布局（导航、内容列表、详情）
- 仪表盘多区域数据展示
- 表格视图支持（任务、奖励管理）

### 界面组件规范

#### 导航组件
- **移动端**: 底部固定导航栏，4-5个主要导航项
- **平板/桌面端**: 侧边栏导航

#### 卡片组件
- **尺寸**:
  - 移动端: 100%宽度
  - 平板端: 每行2个
  - 桌面端: 每行3-4个
- **圆角**: 12px
- **阴影**: 轻微阴影，悬停时增强

#### 表单组件
- **标签位置**: 输入框上方
- **必填指示**: 标签旁显示星号
- **验证反馈**: 输入框下方显示错误信息

#### 按钮规范
- **主要按钮**: 填充背景，明亮色彩
- **次要按钮**: 轮廓式，配合主要按钮使用
- **状态**: 默认、悬停、禁用

### 颜色系统

#### 主色调
- **主色**: #6366F1（靛蓝色）
- **辅助色**: #8B5CF6（紫色）
- **强调色**: #F97316（橙色）

#### 中性色
- **背景**: #F9FAFB（浅灰）
- **卡片/面板**: #FFFFFF（白色）
- **边框**: #E5E7EB（灰色）
- **文本**: #111827（深灰，接近黑色）
- **次要文本**: #6B7280（中灰）

#### 功能色
- **成功**: #10B981（绿色）
- **警告**: #FBBF24（黄色）
- **错误**: #EF4444（红色）
- **信息**: #3B82F6（蓝色）

### 设计资源

#### 图标
- 使用线性图标集，一致的24x24尺寸
- 关键功能使用直观易懂的图标

#### 插图
- 简单的插图元素
- 使用明亮色彩增强视觉吸引力

#### 动画规范
- **过渡动画**: 持续时间200-300毫秒，缓动函数ease-out
- **加载动画**: 简洁不干扰，提供视觉反馈

## 辅助功能标准 [基础要求]

- 提供适当的颜色对比度
- 为所有非文本内容提供替代文本
- 确保键盘可操作性

## 性能目标

- 首次加载时间小于3秒（3G网络）
- 交互响应时间小于200毫秒
- 图片适当压缩和优化

## 开发和部署计划

### MVP开发阶段
1. **搭建基础架构** (2周)
   - 创建Next.js项目
   - 配置Netlify部署
   - 设置FaunaDB集成

2. **实现核心功能** (4周)
   - 用户认证和管理
   - 任务和奖励系统
   - 积分系统

3. **响应式UI实现** (2周)
   - 实现基础组件
   - 确保三端适配
   - 基础UI交互

4. **测试和修复** (1周)
   - 功能测试
   - 修复问题
   - 性能优化

### 部署流程
1. 连接GitHub仓库到Netlify
2. 配置构建命令和环境变量
3. 设置Netlify Functions
4. 集成FaunaDB数据库
5. 配置简单认证系统

### 后续迭代计划
1. **用户体验增强**
   - 添加更多动画和交互效果
   - 实现虚拟角色系统

2. **高级功能开发**
   - 完整成就系统
   - 数据可视化图表
   - 高级任务重复规则

3. **社交功能**
   - 家庭成员互动
   - 分享成就

### 图标系统

#### 图标库选择
- **主要图标库**: [Heroicons](https://heroicons.com/)
  - 由Tailwind CSS团队开发，无缝集成
  - 提供超过450个精心设计的SVG图标
  - 支持实心(solid)和线性(outline)两种风格
  - MIT许可证，可商用

- **扩展图标库**: [Phosphor Icons](https://phosphoricons.com/)
  - 提供超过700个高质量、一致风格的图标
  - 支持6种不同的权重样式(thin, light, regular, bold, fill, duotone)
  - 适用于儿童友好界面的风格

#### 图标实现方式
- **React组件方式**:
  ```jsx
  import { StarIcon, HomeIcon } from '@heroicons/react/24/solid';
  
  // 在组件中使用
  <StarIcon className="h-6 w-6 text-yellow-500" />
  ```

- **导入SVG方式**:
  ```jsx
  import starIcon from '@/assets/icons/star.svg';
  
  // 在组件中使用
  <img src={starIcon} alt="星星" className="h-6 w-6" />
  ```

#### 应用场景专用图标
- **任务状态图标**:
  - 未完成: 空心圆形勾选框
  - 等待验证: 半填充圆形勾选框
  - 已完成: 填充圆形勾选框+勾号

- **奖励类型图标**:
  - 物质奖励: 礼物盒图标
  - 特权奖励: 皇冠/星星图标
  - 体验奖励: 票据/门票图标

- **导航图标**:
  - 仪表盘: 首页/图表组合图标
  - 任务列表: 清单/勾选图标
  - 奖励商店: 商店/礼物图标
  - 个人资料: 用户头像图标
  - 设置: 齿轮图标

#### 图标规范
- **尺寸标准**:
  - 导航图标: 24px × 24px
  - 功能按钮图标: 20px × 20px
  - 指示性小图标: 16px × 16px
  - 特殊大图标: 32px × 32px

- **样式一致性**:
  - 统一线条粗细: 1.5px
  - 圆角半径: 2px
  - 图标内边距: 至少2px，确保视觉平衡

- **颜色应用**:
  - 导航图标: 继承文本颜色
  - 功能图标: 对应功能色(成功、警告、错误等)
  - 状态图标: 对应状态相关颜色

#### 动画图标
- **基础交互动画**:
  - 悬停效果: 轻微缩放(scale: 1.1)或颜色变化
  - 点击效果: 短暂缩小(scale: 0.95)后恢复

- **功能性动画**:
  - 加载中: 旋转动画(loading-spinner)
  - 展开/折叠: 箭头旋转变换
  - 任务完成: 从空心到实心的填充动画

#### 图标辅助功能
- 所有功能图标添加`aria-label`属性
- SVG图标包含`role="img"`和适当的`title`标签
- 纯装饰性图标使用`aria-hidden="true"`

#### 集成到项目
```bash
# Heroicons集成
npm install @heroicons/react

# Phosphor Icons集成
npm install phosphor-react
```

#### 自定义图标方案
- 将应用专属SVG图标放置在`/public/icons`目录
- 创建图标组件库`/components/ui/icons/`方便复用
- 使用`next/image`加载和优化SVG图标

